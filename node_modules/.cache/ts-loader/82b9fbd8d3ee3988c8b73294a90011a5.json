{"remainingRequest":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\ts-loader\\index.js??ref--14-2!C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\src\\components\\gem-farm\\UpdateFarm.vue?vue&type=script&lang=ts","dependencies":[{"path":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\src\\components\\gem-farm\\UpdateFarm.vue","mtime":1650820970826},{"path":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\babel.config.js","mtime":1650820970773},{"path":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650821057627},{"path":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\babel-loader\\lib\\index.js","mtime":1650821057452},{"path":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\ts-loader\\index.js","mtime":1650821095383},{"path":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650821057627},{"path":"C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1650821117514}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcZmVybmFcXERlc2t0b3BcXEhpZGRlblN0YWtpbmdcXGdlbS1mYXJtXFxhcHBcXGdlbS1mYXJtXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIG9uTW91bnRlZCwgcmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB1c2VXYWxsZXQgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvd2FsbGV0JzsKaW1wb3J0IHVzZUNsdXN0ZXIgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvY2x1c3Rlcic7CmltcG9ydCB7IGluaXRHZW1GYXJtIH0gZnJvbSAnLi4vLi4vY29tbW9uL2dlbS1mYXJtJzsKaW1wb3J0IHsgUHVibGljS2V5IH0gZnJvbSAnQHNvbGFuYS93ZWIzLmpzJzsKaW1wb3J0IHsgQk4gfSBmcm9tICdAcHJvamVjdC1zZXJ1bS9hbmNob3InOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogIHByb3BzOiB7CiAgICBmYXJtOiBTdHJpbmcKICB9LAogIGVtaXRzOiBbJ3VwZGF0ZS1mYXJtJ10sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzLCBjdHgpIHsKICAgIHZhciBfdXNlV2FsbGV0ID0gdXNlV2FsbGV0KCksCiAgICAgICAgd2FsbGV0ID0gX3VzZVdhbGxldC53YWxsZXQsCiAgICAgICAgZ2V0V2FsbGV0ID0gX3VzZVdhbGxldC5nZXRXYWxsZXQ7CgogICAgdmFyIF91c2VDbHVzdGVyID0gdXNlQ2x1c3RlcigpLAogICAgICAgIGNsdXN0ZXIgPSBfdXNlQ2x1c3Rlci5jbHVzdGVyLAogICAgICAgIGdldENvbm5lY3Rpb24gPSBfdXNlQ2x1c3Rlci5nZXRDb25uZWN0aW9uOwoKICAgIHZhciBnZjsKICAgIHdhdGNoKFt3YWxsZXQsIGNsdXN0ZXJdLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGluaXRHZW1GYXJtKGdldENvbm5lY3Rpb24oKSwgZ2V0V2FsbGV0KCkpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGdmID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkpOyAvL25lZWRlZCBjb3ogbW91bnRzIGxhdGVyCgogICAgb25Nb3VudGVkKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIShnZXRXYWxsZXQoKSAmJiBnZXRDb25uZWN0aW9uKCkpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gaW5pdEdlbUZhcm0oZ2V0Q29ubmVjdGlvbigpLCBnZXRXYWxsZXQoKSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgZ2YgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSk7IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB1cGRhdGUgZmFybQoKICAgIHZhciBtYW5hZ2VyID0gcmVmKCk7CiAgICB2YXIgbWluU3Rha2luZ1BlcmlvZFNlYyA9IHJlZigpOwogICAgdmFyIGNvb2xkb3duUGVyaW9kU2VjID0gcmVmKCk7CiAgICB2YXIgdW5zdGFraW5nRmVlTGFtcCA9IHJlZigpOwoKICAgIHZhciB1cGRhdGVGYXJtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgbmV3Q29uZmlnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAobWluU3Rha2luZ1BlcmlvZFNlYy52YWx1ZSB8fCBjb29sZG93blBlcmlvZFNlYy52YWx1ZSB8fCB1bnN0YWtpbmdGZWVMYW1wLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIG5ld0NvbmZpZyA9IHsKICAgICAgICAgICAgICAgICAgICBtaW5TdGFraW5nUGVyaW9kU2VjOiBuZXcgQk4obWluU3Rha2luZ1BlcmlvZFNlYy52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgY29vbGRvd25QZXJpb2RTZWM6IG5ldyBCTihjb29sZG93blBlcmlvZFNlYy52YWx1ZSksCiAgICAgICAgICAgICAgICAgICAgdW5zdGFraW5nRmVlTGFtcDogbmV3IEJOKHVuc3Rha2luZ0ZlZUxhbXAudmFsdWUpCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGdmLnVwZGF0ZUZhcm1XYWxsZXQobmV3IFB1YmxpY0tleShwcm9wcy5mYXJtKSwgbmV3Q29uZmlnLCBtYW5hZ2VyLnZhbHVlID8gbmV3IFB1YmxpY0tleShtYW5hZ2VyLnZhbHVlKSA6IHVuZGVmaW5lZCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGN0eC5lbWl0KCd1cGRhdGUtZmFybScpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlRmFybSgpIHsKICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICBtYW5hZ2VyOiBtYW5hZ2VyLAogICAgICBtaW5TdGFraW5nUGVyaW9kU2VjOiBtaW5TdGFraW5nUGVyaW9kU2VjLAogICAgICBjb29sZG93blBlcmlvZFNlYzogY29vbGRvd25QZXJpb2RTZWMsCiAgICAgIHVuc3Rha2luZ0ZlZUxhbXA6IHVuc3Rha2luZ0ZlZUxhbXAsCiAgICAgIHVwZGF0ZUZhcm06IHVwZGF0ZUZhcm0KICAgIH07CiAgfQp9KTs="},{"version":3,"sources":["C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\ferna\\Desktop\\HiddenStaking\\gem-farm\\app\\gem-farm\\src\\components\\gem-farm\\UpdateFarm.vue?vue&type=script&lang=ts"],"names":[],"mappings":";;AACA,SAAS,eAAT,EAA0B,SAA1B,EAAqC,GAArC,EAA0C,KAA1C,QAAuD,KAAvD;AACA,OAAO,SAAP,MAAsB,0BAAtB;AACA,OAAO,UAAP,MAAuB,2BAAvB;AACA,SAAS,WAAT,QAA4B,uBAA5B;AACA,SAAS,SAAT,QAA0B,iBAA1B;AACA,SAAS,EAAT,QAAmB,uBAAnB;AAEA,eAAe,eAAe,CAAC;AAC7B,EAAA,KAAK,EAAE;AACL,IAAA,IAAI,EAAE;AADD,GADsB;AAI7B,EAAA,KAAK,EAAE,CAAC,aAAD,CAJsB;AAK7B,EAAA,KAL6B,iBAKvB,KALuB,EAKhB,GALgB,EAKb;AACd,qBAA8B,SAAS,EAAvC;AAAA,QAAQ,MAAR,cAAQ,MAAR;AAAA,QAAgB,SAAhB,cAAgB,SAAhB;;AACA,sBAAmC,UAAU,EAA7C;AAAA,QAAQ,OAAR,eAAQ,OAAR;AAAA,QAAiB,aAAjB,eAAiB,aAAjB;;AAEA,QAAI,EAAJ;AACA,IAAA,KAAK,CAAC,CAAC,MAAD,EAAS,OAAT,CAAD,uEAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACZ,WAAW,CAAC,aAAa,EAAd,EAAkB,SAAS,EAA3B,CADC;;AAAA;AACvB,cAAA,EADuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAApB,GAAL,CALc,CASd;;AACA,IAAA,SAAS,uEAAC;AAAA;AAAA;AAAA;AAAA;AAAA,oBACJ,SAAS,MAAM,aAAa,EADxB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEK,WAAW,CAAC,aAAa,EAAd,EAAkB,SAAS,EAA3B,CAFhB;;AAAA;AAEN,cAAA,EAFM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT,CAVc,CAgBd;;AACA,QAAM,OAAO,GAAG,GAAG,EAAnB;AACA,QAAM,mBAAmB,GAAG,GAAG,EAA/B;AACA,QAAM,iBAAiB,GAAG,GAAG,EAA7B;AACA,QAAM,gBAAgB,GAAG,GAAG,EAA5B;;AAEA,QAAM,UAAU;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjB,oBACE,mBAAmB,CAAC,KAApB,IACA,iBAAiB,CAAC,KADlB,IAEA,gBAAgB,CAAC,KAHnB,EAIE;AACA,kBAAA,SAAS,GAAG;AACV,oBAAA,mBAAmB,EAAE,IAAI,EAAJ,CAAO,mBAAmB,CAAC,KAA3B,CADX;AAEV,oBAAA,iBAAiB,EAAE,IAAI,EAAJ,CAAO,iBAAiB,CAAC,KAAzB,CAFT;AAGV,oBAAA,gBAAgB,EAAE,IAAI,EAAJ,CAAO,gBAAgB,CAAC,KAAxB;AAHR,mBAAZ;AAKD;;AAZgB;AAAA,uBAcX,EAAE,CAAC,gBAAH,CACJ,IAAI,SAAJ,CAAc,KAAK,CAAC,IAApB,CADI,EAEJ,SAFI,EAGJ,OAAO,CAAC,KAAR,GAAgB,IAAI,SAAJ,CAAc,OAAO,CAAC,KAAtB,CAAhB,GAA+C,SAH3C,CAdW;;AAAA;AAmBjB,gBAAA,GAAG,CAAC,IAAJ,CAAS,aAAT;;AAnBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAV,UAAU;AAAA;AAAA;AAAA,OAAhB;;AAsBA,WAAO;AACL,MAAA,OAAO,EAAP,OADK;AAEL,MAAA,mBAAmB,EAAnB,mBAFK;AAGL,MAAA,iBAAiB,EAAjB,iBAHK;AAIL,MAAA,gBAAgB,EAAhB,gBAJK;AAKL,MAAA,UAAU,EAAV;AALK,KAAP;AAOD;AAxD4B,CAAD,CAA9B","sourcesContent":["\r\nimport { defineComponent, onMounted, ref, watch } from 'vue';\r\nimport useWallet from '../../composables/wallet';\r\nimport useCluster from '../../composables/cluster';\r\nimport { initGemFarm } from '../../common/gem-farm';\r\nimport { PublicKey } from '@solana/web3.js';\r\nimport { BN } from '@project-serum/anchor';\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    farm: String,\r\n  },\r\n  emits: ['update-farm'],\r\n  setup(props, ctx) {\r\n    const { wallet, getWallet } = useWallet();\r\n    const { cluster, getConnection } = useCluster();\r\n\r\n    let gf: any;\r\n    watch([wallet, cluster], async () => {\r\n      gf = await initGemFarm(getConnection(), getWallet()!);\r\n    });\r\n\r\n    //needed coz mounts later\r\n    onMounted(async () => {\r\n      if (getWallet() && getConnection()) {\r\n        gf = await initGemFarm(getConnection(), getWallet()!);\r\n      }\r\n    });\r\n\r\n    // --------------------------------------- update farm\r\n    const manager = ref<string>();\r\n    const minStakingPeriodSec = ref<string>();\r\n    const cooldownPeriodSec = ref<string>();\r\n    const unstakingFeeLamp = ref<string>();\r\n\r\n    const updateFarm = async () => {\r\n      let newConfig;\r\n      if (\r\n        minStakingPeriodSec.value ||\r\n        cooldownPeriodSec.value ||\r\n        unstakingFeeLamp.value\r\n      ) {\r\n        newConfig = {\r\n          minStakingPeriodSec: new BN(minStakingPeriodSec.value!),\r\n          cooldownPeriodSec: new BN(cooldownPeriodSec.value!),\r\n          unstakingFeeLamp: new BN(unstakingFeeLamp.value!),\r\n        };\r\n      }\r\n\r\n      await gf.updateFarmWallet(\r\n        new PublicKey(props.farm!),\r\n        newConfig,\r\n        manager.value ? new PublicKey(manager.value) : undefined\r\n      );\r\n      ctx.emit('update-farm');\r\n    };\r\n\r\n    return {\r\n      manager,\r\n      minStakingPeriodSec,\r\n      cooldownPeriodSec,\r\n      unstakingFeeLamp,\r\n      updateFarm,\r\n    };\r\n  },\r\n});\r\n"],"sourceRoot":""}]}